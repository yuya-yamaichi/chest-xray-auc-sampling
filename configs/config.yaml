# Configuration file for Master's Thesis Research
# Synergistic Effects of Sampling Methods and AUC Optimization

# Dataset configuration
dataset:
  root: "/home/yamaichi/CheXpert/CheXpert-v1.0/"
  test_dataset: "/home/yamaichi/CXR8/dataset/test_dataset/"
  image_size: 224
  use_frontal_only: true

# Training parameters for fine-tuning
finetune:
  batch_size: 32
  learning_rate: 0.05
  gamma: 500  # CRITICAL parameter for PESG
  weight_decay: 0.00001
  margin: 1.0
  epochs: 2
  num_workers: 4
  validation_interval: 400

# Training parameters for pre-training
pretrain:
  batch_size: 32
  learning_rate: 0.0001
  weight_decay: 0.00001
  epochs: 1
  num_workers: 4
  validation_interval: 400

# Model configuration
model:
  architecture: "densenet121"
  num_classes: 1  # Binary classification for fine-tuning
  pretrain_num_classes: 5  # Multi-label for pre-training
  activation: "relu"
  last_activation: "sigmoid"  # For fine-tuning
  pretrained_model_path: "models/pretrained/best_pretrained_model.pth"

# Evaluation configuration
evaluation:
  batch_size: 64
  num_workers: 4

# Directory paths
paths:
  models_dir: "models"
  results_dir: "results"
  training_log_file: "training_log.csv"
  pretraining_log_file: "pretraining_log.csv"
  evaluation_results_file: "final_evaluation_metrics.csv"

# Device configuration
device:
  use_cuda: true  # Will fallback to CPU if CUDA not available

# Reproducibility
reproducibility:
  seed: 123
  deterministic: true
  benchmark: false
  
  # Comprehensive experiment seeds for statistical significance
  experiment_seeds:
    - 42
    - 123
    - 456

# Pathology mapping
pathologies:
  0: "Cardiomegaly"
  1: "Edema"
  2: "Consolidation"
  3: "Atelectasis"
  4: "Pleural Effusion"

# Sampling methods available
sampling_methods:
  - "none"
  - "RandomOverSampler"
  - "SMOTE"
  - "ADASYN"
  - "RandomUnderSampler"
  - "TomekLinks"
  - "NeighbourhoodCleaningRule"
  - "SMOTETomek"
  - "SMOTEENN"

# Sampling ratio configuration
sampling:
  # Default sampling strategy: "auto" for balanced, or specify ratio like "0.5", "1:2"
  sampling_ratio: "auto"
  
  # Comprehensive experiment ratios
  experiment_ratios:
    - "1:1"    # Balanced ratio
    - "1:2"    # 1 minority to 2 majority
    - "1:3"    # 1 minority to 3 majority  
    - "1:4"    # 1 minority to 4 majority
  
  # Method-specific parameters
  smote:
    k_neighbors: 5  # Number of nearest neighbors for SMOTE
    sampling_strategy: "auto"  # Can be "auto", "minority", "majority", or dict/float
  
  adasyn:
    n_neighbors: 5
    sampling_strategy: "auto"
    # Enable optional post-balancing to tighten target ratio within epsilon
    enable_post_balance: true
    post_balance_epsilon: 0.01
  
  random_oversampler:
    sampling_strategy: "auto"  # Can be "auto", "minority", dict, or float
  
  random_undersampler:
    sampling_strategy: "auto"  # Can be "auto", "majority", dict, or float
    replacement: false  # Whether to sample with replacement
  
  smote_tomek:
    sampling_strategy: "auto"
    k_neighbors: 5
  
  smote_enn:
    sampling_strategy: "auto"
    k_neighbors: 5